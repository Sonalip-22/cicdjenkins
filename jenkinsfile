pipeline {
    agent any

    environment {
        JAVA_ARGS = "-Dorg.jenkinsci.plugins.durabletask.BourneShellScript.HEARTBEAT_CHECK_INTERVAL=86400"

    }

    tools {
        maven 'Maven-3.8.8'   // Replace with your configured Maven
        jdk 'Java-17'         // Replace with your configured JDK
    }

    stages {
        stage('Checkout from GitHub') {
            steps {
                git branch: 'main',
                    url: 'https://github.com/Sonalip-22/simplemaven-project.git',
                    credentialsId: 'github-cred'
                echo "pulling sucessfully"
            }
        }

        
        stage('Building') {
            steps {
               sh 'mvn clean package'
               sh 'ls -l target/'
               echo "Build completed successfully!"
            }
        }

        stage('Build Docker Image') {
            steps {
                sh 'docker build -t my-image:latest .'
            }
        }

        // stage('Push to DockerHub') {
        //     steps {
        //         withCredentials([usernamePassword(credentialsId: 'dockerhub-cred', usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD')]) {
        //             sh 'echo $PASSWORD | docker login -u $USERNAME --password-stdin'
        //             sh 'docker push my-image:latest'
        //         }
        //     }
        // }

        // stage('Run Container') {
        //     steps {
        //         sh 'docker run -d --name my-container my-image:latest'
        //     }
        // }
    }

    
}
